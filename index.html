<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokemon TCG Pocket Simulator</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        .results-section {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }
        .result-item {
            padding: 8px 0;
            border-bottom: 1px solid #dee2e6;
        }
        .result-item:last-child {
            border-bottom: none;
        }
        #collectionChart {
            height: 500px !important;
            max-height: 500px;
        }
        .loading {
            position: relative;
            min-height: 200px;
        }
        .loading::after {
            content: attr(data-progress);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.2em;
            color: #6c757d;
        }
        .progress {
            display: none;
        }
        .loading .progress {
            display: block;
            margin-top: 20px;
        }
        
        /* Custom styling for evolve simulator */
        .btn-group .btn {
            transition: all 0.3s ease;
        }
        .btn-group .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .card {
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border: none;
        }
        .card-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
        }
        .form-control-lg {
            border-radius: 8px;
        }
        .btn-lg {
            border-radius: 8px;
            font-weight: 600;
        }
        .badge {
            border-radius: 20px;
        }
    </style>
</head>
<body>
    <div class="container py-4">
        <div class="card shadow">
            <div class="card-body">
                <h1 class="card-title text-center mb-4">Pokemon TCG Pocket Simulator</h1>
                
                <ul class="nav nav-tabs mb-4" id="simTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="pack-tab" data-bs-toggle="tab" data-bs-target="#pack" type="button" role="tab" aria-controls="pack" aria-selected="true">Pack Simulator</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="collection-tab" data-bs-toggle="tab" data-bs-target="#collection" type="button" role="tab" aria-controls="collection" aria-selected="false">Collection Simulator</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="specific-tab" data-bs-toggle="tab" data-bs-target="#specific" type="button" role="tab" aria-controls="specific" aria-selected="false">Specific Card</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="gold-tab" data-bs-toggle="tab" data-bs-target="#gold" type="button" role="tab" aria-controls="gold" aria-selected="false">Gold Calculator</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="evolve-tab" data-bs-toggle="tab" data-bs-target="#evolve" type="button" role="tab" aria-controls="evolve" aria-selected="false">Evolve Simulator</button>
                    </li>
                </ul>

                <div class="tab-content" id="simTabsContent">
                    <!-- Pack Simulator Tab -->
                    <div class="tab-pane fade show active" id="pack" role="tabpanel">
                        <div class="row g-3 align-items-end mb-4">
                            <div class="col-md-3">
                                <label for="packType" class="form-label">Pack Type 1</label>
                                <select id="packType" class="form-select">
                                    <!-- Options populated dynamically -->
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label for="packType2" class="form-label">Pack Type 2 (Optional)</label>
                                <select id="packType2" class="form-select">
                                    <option value="">None</option>
                                    <!-- Options populated dynamically -->
                                </select>
                            </div>
                            <div class="col-md-2">
                                <label for="packCount" class="form-label">Packs per Run</label>
                                <input type="number" id="packCount" class="form-control" min="1" max="1000000" value="1000">
                            </div>
                            <div class="col-md-2">
                                <label for="runCount" class="form-label">Number of Runs</label>
                                <input type="number" id="runCount" class="form-control" min="1" max="10000" value="1">
                            </div>
                            <div class="col-md-2">
                                <label class="form-label">&nbsp;</label>
                                <button id="simulateBtn" class="btn btn-primary w-100">Simulate Packs</button>
                            </div>
                        </div>

                        <div id="error" class="alert alert-danger d-none">
                            Please enter a number between 1 and 1,000,000
                        </div>

                        <div id="results" class="results-section">
                            <h2 class="h4 mb-4">Results</h2>
                            
                            <div class="mb-4">
                                <h3 class="h5 mb-3">Pack Distribution</h3>
                                <div id="packResults"></div>
                            </div>

                            <div class="row">
                                <div class="col-md-6" id="pack1Results">
                                    <h3 class="h5 mb-3">Pack Type 1 Results</h3>
                                    <div class="table-responsive">
                                        <table class="table table-striped table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Rarity</th>
                                                    <th>Cards</th>
                                                    <th>Pulled</th>
                                                    <th>Rate</th>
                                                </tr>
                                            </thead>
                                            <tbody id="cardDistributionTable1"></tbody>
                                            <tfoot>
                                                <tr class="table-secondary">
                                                    <td colspan="2">Total</td>
                                                    <td id="totalCards1"></td>
                                                    <td>100%</td>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                                <div class="col-md-6" id="pack2Results" style="display: none;">
                                    <h3 class="h5 mb-3">Pack Type 2 Results</h3>
                                    <div class="table-responsive">
                                        <table class="table table-striped table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Rarity</th>
                                                    <th>Cards</th>
                                                    <th>Pulled</th>
                                                    <th>Rate</th>
                                                </tr>
                                            </thead>
                                            <tbody id="cardDistributionTable2"></tbody>
                                            <tfoot>
                                                <tr class="table-secondary">
                                                    <td colspan="2">Total</td>
                                                    <td id="totalCards2"></td>
                                                    <td>100%</td>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Multi-Run Statistics -->
                            <div class="mt-4" id="multiRunStats" style="display: none;">
                                <h3 class="h5 mb-3">Multi-Run Statistics</h3>
                                <div class="row" id="multiRunStatsContainer">
                                    <div class="col-md-6" id="multiRunStats1">
                                        <h4 class="h6">Pack Type 1 - Rarity Distribution Across All Runs</h4>
                                        <div class="table-responsive">
                                            <table class="table table-striped table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>Rarity</th>
                                                        <th>Avg per Run</th>
                                                        <th>Min per Run</th>
                                                        <th>Max per Run</th>
                                                        <th>Standard Deviation</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="multiRunTable1"></tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="col-md-6" id="multiRunStats2" style="display: none;">
                                        <h4 class="h6">Pack Type 2 - Rarity Distribution Across All Runs</h4>
                                        <div class="table-responsive">
                                            <table class="table table-striped table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>Rarity</th>
                                                        <th>Avg per Run</th>
                                                        <th>Min per Run</th>
                                                        <th>Max per Run</th>
                                                        <th>Standard Deviation</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="multiRunTable2"></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Collection Simulator Tab -->
                    <div class="tab-pane fade" id="collection" role="tabpanel">
                        <div class="row g-3 align-items-end mb-4">
                            <div class="col-md-4">
                                <label for="collectionPackType1" class="form-label">Pack Type 1</label>
                                <select id="collectionPackType1" class="form-select">
                                    <!-- Options populated dynamically -->
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label for="collectionPackType2" class="form-label">Pack Type 2 (Optional)</label>
                                <select id="collectionPackType2" class="form-select">
                                    <option value="">None</option>
                                    <!-- Options populated dynamically -->
                                </select>
                            </div>
                            <div class="col-md-4">
                                <button id="simulateCollectionBtn" class="btn btn-primary w-100">Simulate</button>
                            </div>
                        </div>

                        <div class="form-check mb-4">
                            <input class="form-check-input" type="checkbox" id="excludeRareCards">
                            <label class="form-check-label" for="excludeRareCards">
                                Only collect common cards (♢, ♢♢, ♢♢♢, ♢♢♢♢)
                            </label>
                        </div>

                        <div class="form-check mb-4">
                            <input class="form-check-input" type="checkbox" id="doubleCollection">
                            <label class="form-check-label" for="doubleCollection">
                                x2 for all cards (collect each cards twice)
                            </label>
                        </div>

                        <div class="results-section">
                            <h2 class="h4 mb-4">Collection Completion Results (10000 trials)</h2>
                            <div id="chartContainer" style="height: 500px;">
                                <div class="progress">
                                    <div class="progress-bar" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                                <canvas id="collectionChart"></canvas>
                            </div>
                            <div id="collectionStats" class="mt-4">
                                <div class="row">
                                    <div class="col-md-6">
                                        <h3 class="h5">Pack Type 1 Statistics</h3>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>10th Percentile:</span>
                                            <span id="p10Packs1">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>20th Percentile:</span>
                                            <span id="p20Packs1">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>30th Percentile:</span>
                                            <span id="p30Packs1">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>40th Percentile:</span>
                                            <span id="p40Packs1">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>50th Percentile (Median):</span>
                                            <span id="p50Packs1">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>60th Percentile:</span>
                                            <span id="p60Packs1">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>70th Percentile:</span>
                                            <span id="p70Packs1">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>80th Percentile:</span>
                                            <span id="p80Packs1">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>90th Percentile:</span>
                                            <span id="p90Packs1">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>Average:</span>
                                            <span id="avgPacks1">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>Minimum:</span>
                                            <span id="minPacks1">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>Maximum:</span>
                                            <span id="maxPacks1">-</span>
                                        </div>
                                    </div>
                                    <div class="col-md-6" id="stats2Container" style="display: none;">
                                        <h3 class="h5">Pack Type 2 Statistics</h3>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>10th Percentile:</span>
                                            <span id="p10Packs2">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>20th Percentile:</span>
                                            <span id="p20Packs2">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>30th Percentile:</span>
                                            <span id="p30Packs2">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>40th Percentile:</span>
                                            <span id="p40Packs2">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>50th Percentile (Median):</span>
                                            <span id="p50Packs2">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>60th Percentile:</span>
                                            <span id="p60Packs2">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>70th Percentile:</span>
                                            <span id="p70Packs2">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>80th Percentile:</span>
                                            <span id="p80Packs2">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>90th Percentile:</span>
                                            <span id="p90Packs2">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>Average:</span>
                                            <span id="avgPacks2">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>Minimum:</span>
                                            <span id="minPacks2">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>Maximum:</span>
                                            <span id="maxPacks2">-</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Specific Card Tab -->
                    <div class="tab-pane fade" id="specific" role="tabpanel">
                        <div class="row g-3 align-items-end mb-4">
                            <div class="col-md-6">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="specificPackType1" class="form-label">Pack Type 1</label>
                                        <select id="specificPackType1" class="form-select">
                                            <!-- Options populated dynamically -->
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="targetRarity1" class="form-label">Target Rarity 1</label>
                                        <select id="targetRarity1" class="form-select">
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="specificPackType2" class="form-label">Pack Type 2 (Optional)</label>
                                        <select id="specificPackType2" class="form-select">
                                            <option value="">None</option>
                                            <!-- Options populated dynamically -->
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="targetRarity2" class="form-label">Target Rarity 2</label>
                                        <select id="targetRarity2" class="form-select" disabled>
                                            <option value="">Select Pack Type 2 first</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="doubleSpecific">
                                    <label class="form-check-label" for="doubleSpecific">
                                        x2 for target cards (collect target card twice)
                                    </label>
                                </div>
                                <button id="simulateSpecificBtn" class="btn btn-primary">Simulate</button>
                            </div>
                        </div>

                        <div class="results-section">
                            <h2 class="h4 mb-4">Packs Needed for Target Cards (10000 trials)</h2>
                            <div id="specificChartContainer" style="height: 500px;">
                                <div class="progress">
                                    <div class="progress-bar" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                                <canvas id="specificChart"></canvas>
                            </div>
                            <div id="specificStats" class="mt-4">
                                <div class="row">
                                    <div class="col-md-6">
                                        <h3 class="h5">Rarity 1 Statistics</h3>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>10th Percentile:</span>
                                            <span id="p10PacksSpecific1">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>20th Percentile:</span>
                                            <span id="p20PacksSpecific1">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>30th Percentile:</span>
                                            <span id="p30PacksSpecific1">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>40th Percentile:</span>
                                            <span id="p40PacksSpecific1">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>50th Percentile (Median):</span>
                                            <span id="p50PacksSpecific1">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>60th Percentile:</span>
                                            <span id="p60PacksSpecific1">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>70th Percentile:</span>
                                            <span id="p70PacksSpecific1">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>80th Percentile:</span>
                                            <span id="p80PacksSpecific1">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>90th Percentile:</span>
                                            <span id="p90PacksSpecific1">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>Average:</span>
                                            <span id="avgPacksSpecific1">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>Minimum:</span>
                                            <span id="minPacksSpecific1">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>Maximum:</span>
                                            <span id="maxPacksSpecific1">-</span>
                                        </div>
                                    </div>
                                    <div class="col-md-6" id="stats2ContainerSpecific" style="display: none;">
                                        <h3 class="h5">Rarity 2 Statistics</h3>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>10th Percentile:</span>
                                            <span id="p10PacksSpecific2">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>20th Percentile:</span>
                                            <span id="p20PacksSpecific2">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>30th Percentile:</span>
                                            <span id="p30PacksSpecific2">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>40th Percentile:</span>
                                            <span id="p40PacksSpecific2">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>50th Percentile (Median):</span>
                                            <span id="p50PacksSpecific2">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>60th Percentile:</span>
                                            <span id="p60PacksSpecific2">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>70th Percentile:</span>
                                            <span id="p70PacksSpecific2">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>80th Percentile:</span>
                                            <span id="p80PacksSpecific2">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>90th Percentile:</span>
                                            <span id="p90PacksSpecific2">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>Average:</span>
                                            <span id="avgPacksSpecific2">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>Minimum:</span>
                                            <span id="minPacksSpecific2">-</span>
                                        </div>
                                        <div class="result-item d-flex justify-content-between">
                                            <span>Maximum:</span>
                                            <span id="maxPacksSpecific2">-</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Gold Calculator Tab -->
                    <div class="tab-pane fade" id="gold" role="tabpanel">
                        <div class="row g-3 mb-4">
                            <div class="col-md-4">
                                <label for="targetPacks" class="form-label">Number of Packs</label>
                                <input type="number" class="form-control" id="targetPacks" min="1" value="100">
                            </div>
                            <div class="col-md-4">
                                <label for="currency" class="form-label">Currency</label>
                                <select class="form-select" id="currency">
                                    <option value="HKD">HKD (Hong Kong Dollar)</option>
                                    <option value="JPY">JPY (Japanese Yen)</option>
                                    <option value="USD">USD (US Dollar)</option>
                                    <option value="GBP">GBP (British Pound)</option>
                                    <option value="EUR">EUR (Euro)</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">&nbsp;</label>
                                <button id="calculateGoldBtn" class="btn btn-primary w-100">Calculate</button>
                            </div>
                        </div>

                        <div class="results-section">
                            <h2 class="h4 mb-4">Gold Purchase Plans</h2>
                            <div class="row">
                                <!-- Plan A: Suggested Package -->
                                <div class="col-md-6">
                                    <div class="card h-100 border-primary">
                                        <div class="card-header bg-primary text-white">
                                            <h3 class="h5 mb-0">Plan A: Single Package</h3>
                                        </div>
                                        <div class="card-body">
                                            <div class="result-item mb-2">
                                                <strong>Package:</strong>
                                                <span id="planAGold">-</span>
                                            </div>
                                            <div class="result-item mb-2">
                                                <strong>Total Cost:</strong>
                                                <span id="planACost">-</span>
                                            </div>
                                            <div class="result-item mb-2">
                                                <strong>Packs You Get:</strong>
                                                <span id="planAPacks">-</span>
                                            </div>
                                            <div class="result-item mb-2">
                                                <strong>Cost Per Pack:</strong>
                                                <span id="planAPerPack">-</span>
                                            </div>
                                            <div class="result-item text-success">
                                                <strong>Extra Packs:</strong>
                                                <span id="planAExtra">-</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Plan B: Exact Gold -->
                                <div class="col-md-6">
                                    <div class="card h-100">
                                        <div class="card-header bg-secondary text-white">
                                            <h3 class="h5 mb-0">Plan B: Multiple Packages</h3>
                                        </div>
                                        <div class="card-body">
                                            <div class="result-item mb-2">
                                                <strong>Total Gold:</strong>
                                                <span id="planBGold">-</span>
                                            </div>
                                            <div class="result-item mb-2">
                                                <strong>Total Cost:</strong>
                                                <span id="planBCost">-</span>
                                            </div>
                                            <div class="result-item mb-2">
                                                <strong>Packs You Get:</strong>
                                                <span id="planBPacks">-</span>
                                            </div>
                                            <div class="result-item mb-2">
                                                <strong>Cost Per Pack:</strong>
                                                <span id="planBPerPack">-</span>
                                            </div>
                                            <div class="mt-3">
                                                <strong>Required Packages:</strong>
                                                <ul id="planBPurchases" class="list-unstyled mt-2 mb-0">
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Evolve Simulator Tab -->
                    <div class="tab-pane fade" id="evolve" role="tabpanel">
                        <!-- Deck Configuration Section -->
                        <div class="card mb-4">
                            <div class="card-header">
                                <h5 class="card-title mb-0">Deck Configuration</h5>
                            </div>
                            <div class="card-body">
                                <div class="row g-3">
                                    <div class="col-md-2 col-6">
                                        <div class="text-center">
                                            <label class="form-label fw-bold text-primary">Basic Pokemon</label>
                                            <div class="btn-group w-100" role="group">
                                                <input type="radio" class="btn-check" name="basicCount" id="basic0" value="0">
                                                <label class="btn btn-outline-primary" for="basic0">0</label>
                                                
                                                <input type="radio" class="btn-check" name="basicCount" id="basic1" value="1">
                                                <label class="btn btn-outline-primary" for="basic1">1</label>
                                                
                                                <input type="radio" class="btn-check" name="basicCount" id="basic2" value="2" checked>
                                                <label class="btn btn-outline-primary" for="basic2">2</label>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-2 col-6">
                                        <div class="text-center">
                                            <label class="form-label fw-bold text-success">Stage 1 Pokemon</label>
                                            <div class="btn-group w-100" role="group">
                                                <input type="radio" class="btn-check" name="stage1Count" id="stage1_0" value="0">
                                                <label class="btn btn-outline-success" for="stage1_0">0</label>
                                                
                                                <input type="radio" class="btn-check" name="stage1Count" id="stage1_1" value="1">
                                                <label class="btn btn-outline-success" for="stage1_1">1</label>
                                                
                                                <input type="radio" class="btn-check" name="stage1Count" id="stage1_2" value="2" checked>
                                                <label class="btn btn-outline-success" for="stage1_2">2</label>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-2 col-6">
                                        <div class="text-center">
                                            <label class="form-label fw-bold text-warning">Stage 2 Pokemon</label>
                                            <div class="btn-group w-100" role="group">
                                                <input type="radio" class="btn-check" name="stage2Count" id="stage2_0" value="0">
                                                <label class="btn btn-outline-warning" for="stage2_0">0</label>
                                                
                                                <input type="radio" class="btn-check" name="stage2Count" id="stage2_1" value="1" checked>
                                                <label class="btn btn-outline-warning" for="stage2_1">1</label>
                                                
                                                <input type="radio" class="btn-check" name="stage2Count" id="stage2_2" value="2">
                                                <label class="btn btn-outline-warning" for="stage2_2">2</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-2 col-6">
                                        <div class="text-center">
                                            <label class="form-label fw-bold text-danger">Cyrus</label>
                                            <div class="btn-group w-100" role="group">
                                                <input type="radio" class="btn-check" name="cyrusCount" id="cyrus_0" value="0" checked>
                                                <label class="btn btn-outline-danger" for="cyrus_0">0</label>
                                                
                                                <input type="radio" class="btn-check" name="cyrusCount" id="cyrus_1" value="1">
                                                <label class="btn btn-outline-danger" for="cyrus_1">1</label>
                                                
                                                <input type="radio" class="btn-check" name="cyrusCount" id="cyrus_2" value="2">
                                                <label class="btn btn-outline-danger" for="cyrus_2">2</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-2 col-6">
                                        <div class="text-center">
                                            <label class="form-label fw-bold text-info">Professor's Research</label>
                                            <div class="btn-group w-100" role="group">
                                                <input type="radio" class="btn-check" name="professorCount" id="professor_0" value="0">
                                                <label class="btn btn-outline-info" for="professor_0">0</label>
                                                
                                                <input type="radio" class="btn-check" name="professorCount" id="professor_1" value="1">
                                                <label class="btn btn-outline-info" for="professor_1">1</label>
                                                
                                                <input type="radio" class="btn-check" name="professorCount" id="professor_2" value="2" checked>
                                                <label class="btn btn-outline-info" for="professor_2">2</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-2 col-6">
                                        <div class="text-center">
                                            <label class="form-label fw-bold text-dark">Poké Ball</label>
                                            <div class="btn-group w-100" role="group">
                                                <input type="radio" class="btn-check" name="pokeballCount" id="pokeball_0" value="0" checked>
                                                <label class="btn btn-outline-dark" for="pokeball_0">0</label>
                                                
                                                <input type="radio" class="btn-check" name="pokeballCount" id="pokeball_1" value="1">
                                                <label class="btn btn-outline-dark" for="pokeball_1">1</label>
                                                
                                                <input type="radio" class="btn-check" name="pokeballCount" id="pokeball_2" value="2">
                                                <label class="btn btn-outline-dark" for="pokeball_2">2</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <hr class="my-4">
                                
                                <div class="row g-4 align-items-end">
                                    <div class="col-md-4">
                                        <div class="text-center">
                                            <label class="form-label fw-bold text-info">Target Stage 2 Count</label>
                                            <div class="btn-group w-100" role="group">
                                                <input type="radio" class="btn-check" name="targetStage2Count" id="target1" value="1" checked>
                                                <label class="btn btn-outline-info" for="target1">1</label>
                                                
                                                <input type="radio" class="btn-check" name="targetStage2Count" id="target2" value="2">
                                                <label class="btn btn-outline-info" for="target2">2</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="text-center">
                                            <label class="form-label fw-bold text-secondary">Simulation Runs</label>
                                            <div class="d-flex justify-content-center">
                                                <input type="number" id="simulationRuns" class="form-control form-control-lg text-center" min="100" max="100000" value="1000" style="max-width: 150px;">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-1">
                                        <div class="text-center">
                                            <label class="form-label fw-bold text-secondary">Debug</label>
                                            <div class="form-check d-flex justify-content-center">
                                                <input class="form-check-input" type="checkbox" id="debugMode" style="transform: scale(1.5);">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="text-center">
                                            <label class="form-label fw-bold text-transparent">Simulate</label>
                                            <button id="simulateEvolveBtn" class="btn btn-primary btn-lg w-100">
                                                <i class="fas fa-play me-2"></i>Simulate Evolution
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Preset Configurations -->
                        <div class="card mb-4">
                            <div class="card-header">
                                <h5 class="card-title mb-0">Quick Presets</h5>
                            </div>
                            <div class="card-body">
                                <div class="row g-2">
                                    <div class="col-md-4 col-sm-6">
                                        <button type="button" class="btn btn-outline-primary w-100" id="presetBalanced">
                                            <i class="fas fa-balance-scale me-2"></i>Balanced (2-2-1)
                                        </button>
                                    </div>
                                    <div class="col-md-4 col-sm-6">
                                        <button type="button" class="btn btn-outline-success w-100" id="presetHeavy">
                                            <i class="fas fa-arrow-up me-2"></i>Heavy Evolution (1-2-2)
                                        </button>
                                    </div>
                                    <div class="col-md-4 col-sm-6">
                                        <button type="button" class="btn btn-outline-info w-100" id="presetLight">
                                            <i class="fas fa-arrow-down me-2"></i>Light Evolution (2-1-1)
                                        </button>
                                    </div>
                                    <div class="col-md-4 col-sm-6">
                                        <button type="button" class="btn btn-outline-warning w-100" id="presetMax">
                                            <i class="fas fa-star me-2"></i>Maximum (2-2-2)
                                        </button>
                                    </div>
                                    <div class="col-md-4 col-sm-6">
                                        <button type="button" class="btn btn-outline-secondary w-100" id="presetMinimal">
                                            <i class="fas fa-minus me-2"></i>Minimal (1-1-1)
                                        </button>
                                    </div>
                                    <div class="col-md-4 col-sm-6">
                                        <button type="button" class="btn btn-outline-danger w-100" id="presetNoBasic">
                                            <i class="fas fa-times me-2"></i>No Basic (0-2-2)
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Deck Composition Display -->
                        <div id="deckComposition" class="mb-4"></div>

                        <div class="results-section">
                            <h2 class="h4 mb-4">Evolution Probability Results</h2>
                            
                            <!-- Debug Output Area -->
                            <div id="debugOutput" class="mb-4" style="display: none;">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="card-title mb-0">
                                            <i class="fas fa-bug me-2"></i>Debug Mode - Step-by-Step Simulation
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="debugSteps" style="max-height: 400px; overflow-y: auto; font-family: monospace; font-size: 0.9em;">
                                            <!-- Debug output will be inserted here -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="evolveChartContainer" style="height: 500px;">
                                <div class="progress">
                                    <div class="progress-bar" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                                <canvas id="evolveChart"></canvas>
                            </div>
                            <div id="evolveStats" class="mt-4">
                                <div class="row">
                        <div class="col-md-6">
                            <h3 class="h5">Evolution Statistics</h3>
                            <div class="result-item d-flex justify-content-between">
                                <span>Success Rate:</span>
                                <span id="successRateEvolve">-</span>
                            </div>
                            <div class="result-item d-flex justify-content-between">
                                <span>Average Turns to Evolve:</span>
                                <span id="avgTurnsEvolve">-</span>
                            </div>
                            <div class="result-item d-flex justify-content-between">
                                <span>Median Turns to Evolve:</span>
                                <span id="medianTurnsEvolve">-</span>
                            </div>
                            <div class="result-item d-flex justify-content-between">
                                <span>Minimum Turns:</span>
                                <span id="minTurnsEvolve">-</span>
                            </div>
                            <div class="result-item d-flex justify-content-between">
                                <span>Maximum Turns:</span>
                                <span id="maxTurnsEvolve">-</span>
                            </div>
                        </div>
                                    <div class="col-md-6">
                                        <h3 class="h5">Turn-by-Turn Probability</h3>
                                        <div class="table-responsive">
                                            <table class="table table-striped table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>Turn</th>
                                                        <th>Evolution Probability</th>
                                                        <th>Cumulative Probability</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="evolveProbabilityTable"></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery, Bootstrap, and Chart.js -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Main Application -->
    <script type="module" src="./js/app.js"></script>
</body>
</html>
